---
layout: post  
title:  "app登录设计方案"  
date:   2017-06-25 00:41  
categories: 方案设计  
permalink: /Priest/app-login-scheme

---

## 背景
最近我们组内对厂里的web和APP登录进行改造，但我们在做方案的时候重点把更多的精力放在APP端，因为APP是最大的流量来源。我们主要是针对现状APP的登录设计做一个分析以及风险评估，进而设计有针对性的方案设计。  
我们参考了市面上很多厂商和一些技术书籍提出来的方案，经过一个月的讨论和思考，对APP登录的方案设计有了个初步的轮廓，在这里我们大概把做APP端登录的思路说下，细节不会说，但是会写下我们自己的一些思考，仅供参考。

## 历史：APP登录方案进化  

**初始**  
 1.每个系统都有自己的一套登录处理方案，一旦登录处理逻辑有改变，几乎所有业务系统都要改变各自的登录代码  
 2.退出登录接口也是各自维护一套
**初步改进**
 将各个系统的登录处理抽取成一个dubbo服务，所有的业务系统通过调用dubbo服务进行登录校验    

登录验证过后，服务端颁发一个accessToken给app客户端，客户端通过https请求，在URL带上accessToken，服务端再通过accessToken进行用户的身份校验。而且大部分情况下，accessToken的过期时间都非常长，2个月、3个月、半年，甚至有些是永久。       

## 风险评估
> 1.解耦，以后每加一个项目都要引入登录的dubbo服务，如果dubbo服务有改动，所有项目的都要进行调整
> 2.安全性，accessToken时间过长，被拦截后，
>
>
>
>
>
>
## 新方案设计

### 将登录完全独立

### 对请求做的安全处理：防篡改和防重放

### accessToken续命

## 新方案风险评估

## 总结

## 参考资料
